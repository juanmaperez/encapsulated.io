{"data":{"markdownRemark":null},"pageContext":{"isCreatedByStatefulCreatePages":false,"prev":{"html":"<p>Template Driven is the most common way to manage forms in Angular when you start to dive into this framework. Although It offers fewer features than the Reactive approximation, sometimes It could be very useful. Mainly for forms which don’t manage huge information.</p>\n<p>In the Template Driven approach, your form is set in the template an Angular infers the form object from the DOM.</p>\n<p>Angular always detects the form tag in the HTML and automatically creates an Object to represent this element.</p>\n<p>But Angular doesn’t detect fields into the form and this behavior is for some reasons:</p>\n<ul>\n<li>maybe all inputs, selects or radios, etc must not be sent.</li>\n<li>Maybe we could have elements that only interacts with the UI.</li>\n<li>others.</li>\n</ul>\n<p>Then, the information that our form will save on its value must be added by us with the ngModel directive.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Submitting Form</h2>\n<p>We submit forms through ngSubmit event binding and normally a function fired through this event makes all work with our form.</p>\n<p>But we need first create a reference of this form which will be passed as a parameter into this function.</p>\n<p>We create this reference through the ngForm directive associated with a template reference variable (#myForm). Later, the reference it’s the element we pass into the function.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">(ngSubmit)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>onSubmit(myForm)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">#myForm</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ngForm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  \n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>You didn’t add an NgForm directive.</p>\n<p>Angular did. Angular automatically creates and attachesan NgForm directive to the form tag.</p>\n<p>The NgForm directive supplements the form element with additional features. It holds the controls you created for the elements with an ngModel directive and name attribute and monitors their properties, including their validity. It also has its own valid property which is true only if every contained control is valid.</p>\n<p>The ngForm directive will create a javascript object automatically with all form data, which will be passed to the function in the template and received in the function declaration in the TypeScript file.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">form<span class=\"token punctuation\">:</span> NgForm</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//log in the console the form data</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, thanks to ngForm we will access easily to all properties created from our form. Some of this properties allow us to interact with UI and know specific details and information about the form.</p>\n<ul>\n<li>Dirty: some values have changed</li>\n<li>Touched: some field was clicked</li>\n<li>Invalid: some validation rule wasn’t passed</li>\n<li>Status: general status of the form. For example, valid.</li>\n<li>Errors: errors returned by validation rules</li>\n</ul>\n<p>One pragmatic way to use these properties is to disable the submit button when the form is not valid.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token operator\">&lt;</span>button <span class=\"token punctuation\">[</span>disabled<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"!myForm.valid\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span> Submit <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<h2>Access to Form through ViewChild</h2>\n<p>We declared a template reference variable in our form tag which was assigned to ngForm. We can access this reference through the ViewChild decorator as well.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  @<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myForm'</span><span class=\"token punctuation\">)</span> myForm<span class=\"token punctuation\">:</span> NgForm</code></pre></div>\n<h2>Validation in the template</h2>\n<p>We can add to our form fields different validation rules with directives:</p>\n<ul>\n<li>required</li>\n<li>email</li>\n<li>maxlength</li>\n<li>pattern</li>\n</ul>\n<p>Thanks to these directives, Angular will add or remove some classes to the form that indicates how is the status at this moment: ng-invalid, ng-touched. Managing this classes we can return a visual feedback to the user to indicate when a value is not correct.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">email</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">  <span class=\"token selector\">input.ng-invalid.ng-touched</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid red<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Adding Error messages</h2>\n<p>Sometimes, a border red is not enough to indicate to the user what is wrong with this field. Then we should show the error with a message in a help box.</p>\n<p>To do this, we need a reference to this field that allows us to access to this field from any place on this template. We need to add to the input tag a template reference variable assigned to the ngModel directive.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">email</span> <span class=\"token attr-name\">#email</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ngModel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Why “ngModel”? A directive’s exportAs property tells Angular how to link the reference variable to the directive. You set email to ngModel because the ngModel directive’s exportAs property happens to be ngModel.</p>\n<p>Now, we can show o hide a message that indicates if this field is valid or invalid related to the email property that references an ngModel directive for this field.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>help-block<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>!email.valid and email.touched<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    Email should be valid\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Setting default values with bindings</h2>\n<h3>One way data binding</h3>\n<p>We could set a default value for inputs through property binding. We can create a property in our ts file:</p>\n<p>public response: string = 'pet'\nAnd later we can make reference to this property from the template with a ngModel property binding with []</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>response<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">[ngModel]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>response<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>Two-way data binding</h3>\n<p>Besides, we could want to make some validation the value introduced in the input. Or show this value in other places automatically. Two-way data binding with ngModel is how we should do this.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>response<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">[(ngModel)]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>response<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">></span></span>\n  \n  // we can show the value in other place\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>{{ response }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Grouping Form Controls</h2>\n<p>Maybe we could want to structure our object of values in the ngForm because we are looking for organizing all values in bigger forms.</p>\n<p>To do this we have to wrap our inputs which belong to the same group and add the directive</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>user-data<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModelGroup</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>userData<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">#userData</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ngModelGroup<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Username<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n        \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ngModel</span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">email</span> <span class=\"token attr-name\">#email</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ngModel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>help-block<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>!email.valid &amp;&amp; email.touched<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Please enter a valid Email<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>As we can see above we can create a template reference variable for this ngModelGroup (#userData=”ngModelGroup”) to access to the object representation of this group and add error messages under the group.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>!userData.valid &amp;&amp; userData.touched<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>UserData is not valid!!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Patching and setting values to forms</h2>\n<p>We have two different methods to insert values in a form setting all values for a form or patch only specific fields.</p>\n<p>Through the ViewChild decorator, we can create a representation of the form which has a template reference variable. After this, we can do different actions over this form from the typeScript file</p>\n<p>Set values in a complete form\nIn the case of set al values to the complete form, We can pass an object with the same structure that  form values property has:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  @<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myForm'</span><span class=\"token punctuation\">)</span> myForm<span class=\"token punctuation\">:</span> NgForm \n \n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myForm<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      userData<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          username<span class=\"token punctuation\">:</span><span class=\"token string\">'john'</span><span class=\"token punctuation\">,</span>\n          email <span class=\"token punctuation\">:</span><span class=\"token string\">'johndoe@gmail.com'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      response<span class=\"token punctuation\">:</span><span class=\"token string\">'My pet\\'s name was Rudolf'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Patch value in a specific form field</h2>\n<p>By another hand, we can only patch a value for an input or select. To do this, we use the patchValue function from form wrap.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myForm<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span><span class=\"token function\">patchValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      userData<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        username<span class=\"token punctuation\">:</span> <span class=\"token string\">'Jonh'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Of course, this actions should be encapsulated in methods and we can execute them wherever we want: ngOnInit or after a user action with an event binding that fires this function, a button clicked for example.</p>","id":"5d9e8eba-5400-5d98-8325-c97e0c3e7cdd","frontmatter":{"date":"May, 23, 2018","path":"/angular-forms-template-driven-approach","title":"Angular Forms: Template Driven approach","excerpt":"Template Driven is the most common way to manage forms in Angular when you start to dive into this framework. Although It offers fewer features than the Reactive approximation, sometimes It could be very useful. Mainly for forms which don’t manage huge information.","tags":["javascript","angular","angular forms","template driven approach"],"type":"post","category":"angular","thumbnail":{"childImageSharp":{"fluid":{"src":"/static/f13e622ca613a6677ffb06adcebf4bd1/7a298/angular_forms_1.jpg"}}},"icon":{"childImageSharp":{"fluid":{"src":"/static/400f9d04b95a30fefc2839dcc8e519e4/48c6d/angular.png"}}}}},"next":{"html":"<p>Coercion is one of the most difficult things to understand in Javascript if you don't know how it's working behind the scenes and how types are applied when you are comparing to values with == instead of ===.</p>\n<p>For explaining this concept I'm gonna take a meme as the base of my post and because I know some people don't understand the concept behind the joke since maybe they only saw the last scene of the meme. Which it was something like this:</p>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 38.08777429467085%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACOUlEQVQozyWPWUuUYRiGP8hl9hhnnH3Vb/blGzVnzGU0S/NAMyvcw+rAStSyRUtRI5qJKSdGgiTKksiCjgwK7CD6CUEUJtQP6FdcvdTZ/cDFdd+PpHam0Np86Lx16Nxx9DVpdJ4EOmccrSOCxuIVdxJtoAt1tft/dkYE1yT4GHpfA1prLVpXDI3ZgaQ22TE4gxh8KQErGGrTmMJtVFh8qNyiTEAaRxSNU0FntmKURaEzLIQZjMFmDP46yuzhfyWaKiuSylhNpQDUYpXaHsAayZLqv0/s0CBOT5wKs0ssjaKyhZDKK5EsYZFlVEIQbb9I9PgisUCLYIKoq+xITpuLnqYe/C19lNkUhhNd1A2sUeyY4Ho4g0oIVRYZU43CtdkFbuU2cNR3EvU10ZedpKc/z3b9Ueq8CQ4YLUiKV2avMM+fn3s83drFE2knYQ+x2NpLOtFNucGIWggtsXa+f3zPp3fbrL/cofv0LDZXknOJDJOtZzA5YlTqDUijHZ382u1lubDM/v5v9n58Y2tihnzoMO5QGpUvir62HrUtw4eVIzwuZol0DNI8NEko3My6cowR8UmZ3IDeE0RqvHSTmcIFXONTuMau8Hz3M2+/fCVwYh7r4Bzms9NYhi9jG5tjfGWGU3emsA5f5eDJ85hHppGHVpEH5qkSuXp0Gqltcwcl94zO0itSuSf4bz+gIVckurRGcqWEvJAnslqi+80uDY9e01jYJFt8QTK/gXJvHeXuQ+JLJWIra/hv5PgLnHMbBhJpo8AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"The tricky meme\"\n        title=\"\"\n        src=\"/static/85aa3dab8a8b17f18abd2559cd5913d6/bcf2d/meme.png\"\n        srcset=\"/static/85aa3dab8a8b17f18abd2559cd5913d6/d5c4a/meme.png 185w,\n/static/85aa3dab8a8b17f18abd2559cd5913d6/04e89/meme.png 370w,\n/static/85aa3dab8a8b17f18abd2559cd5913d6/bcf2d/meme.png 740w,\n/static/85aa3dab8a8b17f18abd2559cd5913d6/dbb75/meme.png 1110w,\n/static/85aa3dab8a8b17f18abd2559cd5913d6/1589a/meme.png 1276w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n      />\n  </span></p>\n<p>The whole game with this meme was something like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">   <span class=\"token comment\">// if</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"0\"</span>  <span class=\"token comment\">// true</span>\n\n   <span class=\"token comment\">// and </span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\">// true</span>\n   \n   <span class=\"token comment\">// then must be true</span>\n   <span class=\"token string\">\"0\"</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\">// but false</span></code></pre></div>\n<p>If we are following the steps that are happening here is something like this. When comparing to elements with different types through the double equal sign, coercion is happening to make equal the type of the second value and making Javascript able to compare the values given.</p>\n<p>In that way if the first element given is a number and the second one is a string, Javascript makes the second one into a string and compares again if the values are the same after coercion. And it does.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">   <span class=\"token comment\">// if</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"0\"</span>  <span class=\"token comment\">// true</span>\n\n   <span class=\"token comment\">// javascritp makes something like this</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span>  \n   \n   <span class=\"token comment\">// and then </span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span>  <span class=\"token comment\">// true</span></code></pre></div>\n<p>The second example is something similar but in this case we are comparing with a bit weird value as an Array or Object since an array is an Object by itself. </p>\n<p>In this case we are comparing 0 with an empty Array and coercion applies trying to make a string from the array returning an empty string. After this it compares a number with an empty string and coercion ocurrs again and the result of passing a empty string is 0. Then 0 is equal to 0</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">   <span class=\"token comment\">// if</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\">// true</span>\n\n   <span class=\"token comment\">// javascritp makes something like this</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// which value returned is an empty string</span>\n   \n   <span class=\"token comment\">// coercion happens again over the empty string</span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//  which returns 0</span>\n\n   <span class=\"token comment\">// and then </span>\n   <span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span>  <span class=\"token comment\">// true</span></code></pre></div>\n<p>And then we get the last case, assuming that 0 == \"0\" is true, and 0 == [] then it should be the same result of comparing \"0\" and []. But what actually happen is something different.</p>\n<p>We compare the 0 as string with an empty array. Coercion happens and Javascript turns the empty array into a empty string, and as you can figure out, an empty string is different of 0 as string. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">   <span class=\"token comment\">// if</span>\n   <span class=\"token string\">\"0\"</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\">// false</span>\n\n   <span class=\"token comment\">// because</span>\n   <span class=\"token string\">\"0\"</span> <span class=\"token operator\">==</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// which value returned is an empty string</span>\n   \n   <span class=\"token comment\">// coercion happens again over the empty string</span>\n   <span class=\"token string\">\"0\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span> <span class=\"token comment\">//  false</span></code></pre></div>\n<p>Everything was a bit tricky with this meme and all related to coercion. Some people understand this behaviour as a good thing and others like a bad thing. In my opinion this is a powerfull tool that must be used in very specific cases and always knowing what is happening behind every value returned because otherwise It can turns into a nightmare.  </p>","id":"fd1c0847-4136-5cca-b0ec-48f4c05e82c8","frontmatter":{"date":"September, 17, 2019","path":"/a-meme-for-coercion","title":"A meme for coercion","excerpt":"Coercion is one of the most difficult things to understand in Javascript if you don't know how it's working behind the scenes and how types are applied when you are comparing to values.","tags":["javascript","coercion","pure functions","functional programming"],"type":"post","category":"javascript","thumbnail":null,"icon":{"childImageSharp":{"fluid":{"src":"/static/49a21704a5bb82d398913aceb94c63af/48c6d/javascript.png"}}}}}}}