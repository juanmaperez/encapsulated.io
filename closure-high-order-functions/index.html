<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.df9444a55ec1e0104286.css">@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700&display=swap);code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}*{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}body,footer,header,html,main{width:100%;max-width:100%}abbr,address,article,aside,audio,b,body,canvas,caption,dd,del,details,dfn,div,dl,dt,em,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,p,q,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,ul,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1;--bgColor:#fbf3f2;--bgColorRGB:251,243,242;--primaryColor:#032539;--primaryColorRGB:3,37,57;--secondaryColor:#6b6666;--secondaryColorRGB:28,118,143;--tertiaryColor:#2a77aa;--tertiaryColorRGB:250,153,28;color:var(--primaryColor);background:var(--bgColor);-webkit-transition:all .3s linear;transition:all .3s linear}body.dark{--bgColor:#032539;--bgColorRGB:3,37,57;--primaryColor:#fbf3f2;--primaryColorRGB:251,243,242;--secondaryColor:#7fbce4;--secondaryColorRGB:250,153,28;--tertiaryColor:#70baeb;--tertiaryColorRGB:28,118,143}body.dark .face img,body.dark .logo img,body.dark .notfound img{-webkit-filter:invert(100%);filter:invert(100%)}a{color:var(--secondaryColor);text-decoration:none}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{text-decoration:none}ins,mark{background-color:#ff9;color:#000}mark{font-style:italic;font-weight:700}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}ol,ul{list-style:none}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::-moz-selection{background:#27292a}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:hsla(0,0%,100%,.15)}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto;box-sizing:border-box}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}</style><meta name="generator" content="Gatsby 2.4.2"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Closure and high order functions | finejavascript</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="undefined"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="undefined"/><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="undefined"/><meta data-react-helmet="true" name="description" content="Closure is one of the most powerful features in Javascript, and used in the right way can bring endless possibilities into your implementations."/><meta data-react-helmet="true" property="og:title" content="Closure and high order functions"/><meta data-react-helmet="true" property="og:description" content="Closure is one of the most powerful features in Javascript, and used in the right way can bring endless possibilities into your implementations."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Juanma Perez"/><meta data-react-helmet="true" name="twitter:title" content="Closure and high order functions"/><meta data-react-helmet="true" name="twitter:description" content="Closure is one of the most powerful features in Javascript, and used in the right way can bring endless possibilities into your implementations."/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta data-react-helmet="true" name="google-site-verification" content="qojztTOFTmy83nCRl5qy96O5vHACP_n7tWkhEcqSLFw"/><meta data-react-helmet="true" name="keywords" content="javascript, functions, closure, high order functions, javascript closure"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><style data-styled="hkMYRs eGwaZF eeruQh" data-styled-version="4.2.0">
/* sc-component-id: theme-switcher__ThemeSwitcherView-sc-15zitb9-0 */
.eGwaZF{margin-top:5px;margin-right:5px;background:var(--bgColor);border:1px solid var(--primaryColor);width:40px;height:20px;border-radius:20px/20px;position:relative;} .eGwaZF svg{max-width:12px;} .eGwaZF svg path{max-width:12px;} .eGwaZF .dark-icon{font-size:12px;position:absolute;left:5px;top:4px;color:var(--primaryColor);} .eGwaZF .light-icon{font-size:12px;position:absolute;right:5px;top:4px;color:var(--primaryColor);} .eGwaZF .ball-button{position:absolute;z-index:10;top:-1px;left:-1px;border:1px solid var(--primaryColor);width:20px;height:20px;border-radius:50%;background:var(--bgColor);-webkit-transition:all 300ms ease-in;transition:all 300ms ease-in;} .eGwaZF .ball-button:hover{border:1px solid var(--secondaryColor);} .eGwaZF .ball-button.dark{-webkit-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}
/* sc-component-id: header__HeaderView-sc-31ozxh-0 */
.hkMYRs{padding:0px;color:#000;width:100%;position:fixed;top:0px;left:0px;z-index:1000;box-sizing:border-box;} .hkMYRs .header-wrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:15px 20px;box-sizing:border-box;max-width:100%;} .hkMYRs .header-wrapper div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;} .hkMYRs .header-wrapper div .logo{margin-top:3px;width:35px;height:24px;} .hkMYRs .header-wrapper div .logo img{max-width:100%;} .hkMYRs .header-wrapper div .title{margin-left:5px;font-size:26px;line-height:1.1;font-weight:800;color:var(--primaryColor);display:inline-block;font-family:'Montserrat',sans-serif;mix-blend-mode:difference;} .hkMYRs .header-wrapper div .title .title-link{color:var(--primaryColor);-webkit-text-decoration:none;text-decoration:none;mix-blend-mode:difference;}
/* sc-component-id: blog-post__BlogPostView-sc-1g2ojw6-0 */
.eeruQh{padding-bottom:50px;position:relative;overflow:hidden;} .eeruQh .post-container{max-width:670px;box-sizing:border-box;width:50%;margin:0px auto;padding:100px 0 40px;} @media(max-width:1590px){.eeruQh .post-container{width:50%;}} @media(max-width:1100px){.eeruQh .post-container{width:55%;}} @media(max-width:878px){.eeruQh .post-container{width:75%;}} @media(max-width:510px){.eeruQh .post-container{width:95%;padding:100px 10px 40px;}} .eeruQh .post-container .step-buttons{margin:60px 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:14px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;} .eeruQh .post-container .step-buttons div{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;} .eeruQh .post-container .step-buttons div:hover{-webkit-text-decoration:underline;text-decoration:underline;} .eeruQh .post-container .step-buttons div.next{text-align:right;} .eeruQh .post-container .step-buttons div.next div{text-align:right;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;} .eeruQh .post-container .step-buttons div.prev{text-align:left;} .eeruQh .post-container .step-buttons div svg{margin:0px 10px;} .eeruQh .post-container .post-date{font-size:13px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:var(--primaryColor);margin-bottom:1px;} .eeruQh .post-container .post-date .post-icon{position:relative;top:-3px;margin-right:10px;display:inline-block;width:8px;height:17px;background:url(/static/49a21704a5bb82d398913aceb94c63af/48c6d/javascript.png);border-radius:50%/25%;background-size:130%;background-position:center 1px;background-repeat:no-repeat;overflow:hidden;background-color:transparent;} .eeruQh .post-container .back{font-size:14px;opacity:.5;box-sizing:border-box;cursor:pointer;color:var(--primaryColor);width:100%;display:block;margin-bottom:10px;} .eeruQh .post-container .post-title{font-family:'Montserrat',sans-serif;margin:30px 0px 10px;font-size:32px;font-weight:800;color:var(--tertiaryColor);} @media(max-width:768px){.eeruQh .post-container .post-title{font-size:28px;margin:10px 0px 10px;}} @media(max-width:510px){.eeruQh .post-container .post-title{font-size:28px;margin:0px 0px 10px;}} .eeruQh .post-container .post-content{margin-top:30px;line-height:1.6;font-size:17px;} .eeruQh .post-container .post-content blockquote{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:10px 20px;margin:30px 0 30px 0px;border-left:5px solid var(--primaryColor);font-style:italic;font-size:24px;line-height:1.4;} .eeruQh .post-container .post-content blockquote *{margin:0px !important;} .eeruQh .post-container .post-content pre{max-width:100%;font-size:14px;line-height:1.2;display:block;padding:5px;} .eeruQh .post-container .post-content p{margin-bottom:20px;color:var(--primaryColor);} .eeruQh .post-container .post-content h2{color:var(--tertiaryColor);margin:10px 0px 10px;font-size:20px;} .eeruQh .post-container .post-content h3{margin:10px 0px;-webkit-text-decoration:underline;text-decoration:underline;} .eeruQh .post-container .post-content a{color:var(--tertiaryColor);-webkit-text-decoration:none;text-decoration:none;} .eeruQh .post-container .post-content ul{margin:30px 0px 30px;padding-left:0px;list-style:circle !important;padding-left:20px;} .eeruQh .post-container .post-content ul li{margin-bottom:10px;} .eeruQh .post-container .post-content ul li:before{list-style:disc !important;padding-right:15px;font-size:14px;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=d0e7d86e2b09c599ffbe33633ba86d5e82c5fd63"/><link as="script" rel="preload" href="/webpack-runtime-d3ebae42f2bc4ae605a4.js"/><link as="script" rel="preload" href="/app-521b4bc510fc94f4c985.js"/><link as="script" rel="preload" href="/styles-f9e47191f1b1e31091d6.js"/><link as="script" rel="preload" href="/1-39504997749b40bf1bb9.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-3de5741b444693cac106.js"/><link as="fetch" rel="preload" href="/static/d/960/path---closure-high-order-functions-b-18-aaa-sp359ZlkTePHQacveclhLr1wUw.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header__HeaderView-sc-31ozxh-0 hkMYRs"><div class="header-wrapper"><div><h1 class="title"><a class="title-link" href="/">finejavascript</a></h1></div><div><div class="theme-switcher__ThemeSwitcherView-sc-15zitb9-0 eGwaZF"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun fa-w-16 light-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:12px"><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon fa-w-16 dark-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:12px"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg><div class="ball-button undefined"></div></div></div></div></header><div class="main"><div class="content-wrapper"><div height="0" class="blog-post__BlogPostView-sc-1g2ojw6-0 eeruQh"><div class="post-container"><a class="back" href="/">Back to the list</a><h2 class="post-title">Closure and high order functions</h2><div class="post-date"><span class="post-icon"></span>April, 10, 2021</div><div class="post-content"><p><a href="/high-order-functions-callbacks-inversion-control">High order functions</a> are one of the patterns more used in Javascript and one of the reasons is because of a feature that allows us to persist the local memory of a function beyond its invocation, and its name is closure.</p>
<p>Closures will provide us a super powerful tool that will allow us to create complex patterns like currying, once time invokation functions, memoization, even the module pattern which is based on closure as well.</p>
<h2>Returning functions</h2>
<p>Functions never remember anything from previous runnings, the local memory created inside them is fresh every time. Everything is deleted but the returned value. </p>
<p>Nevertheless, there is a way to cache that local memory created inside of that function and make it persist attached to the value returned from that function, and that value <strong>must be another function.</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">function</span> <span class="token function">createMultiplier</span><span class="token punctuation">(</span><span class="token parameter">multiplier</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">multipy</span> <span class="token punctuation">(</span><span class="token parameter">multiplicand</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> multiplier <span class="token operator">*</span> multiplicand
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> multiply
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> multiplyBy2 <span class="token operator">=</span> <span class="token function">createMultiplier</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> value1 <span class="token operator">=</span> <span class="token function">multiplyBy2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">// 20</span>
  <span class="token keyword">const</span> value2 <span class="token operator">=</span> <span class="token function">multiplyBy2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>   <span class="token comment">// 8</span></code></pre></div>
<p>Above we are able to persist multiplier, which is within the scope of the multiply function by returning multiply without being executed, that way we attach to it all the lexical environment from where it was created.</p>
<p>As a note, we need to clarify that once multiply is returned from createMultiplier, it has nothing to do with the function where it was created. Once its definition was returned we don't care anymore about createMultiplier but the definition of multiply stored in the variable multiplyBy2.</p>
<h2>Nested function scope</h2>
<p>As we know, when returning a function from another function what we are trying to achieve is persist the outer's function scope (<strong>lexical environment</strong>) which is accessible from the function definition returned, and that's because where a function is created determines what data it has access to when it's called.</p>
<blockquote>
<p>Where a function is created determines what data it has access to when it's called</p>
</blockquote>
<p>This also applies to functions declared directly in the global memory, and in the next example when we try to execute the expression <strong>counter++</strong> from inside the increment function, if it doesn't find the variable in its own local memory, it goes straight to look for it in the global memory.  </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    counter<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token comment">// 2</span></code></pre></div>
<p>Inside of a function since increment was declared into the outer function, when it doesn't find counter in its own local memory, tries to find it in the outer's local memory which is still there because we have not finished executing that function.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      counter<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> counter
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span></code></pre></div>
<p>The only problem with the previous implementation is that the value of the counter doesn't persist further than outers invocation, and that's because we are executing increment inside of the function instead of returning its definition.</p>
<h2>Retain function memory</h2>
<p>Let's say that instead of the previous implementation, what we want to do is persist the value of the counter to be taken into account for next runnings of increment.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      counter<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> increment
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span></code></pre></div>
<p>In that case, what we are doing is creating an outer function, and declare inside of it our increment function, but instead of invoking increment from inside that function, what we will be doing is returning increment out and storing that function definition into a new variable called count.</p>
<p>From now on, when we invoke count, which contains the definition of increment created inside of outer, It's going to try to find counter in its own local memory and when it doesn't find it, instead of looking for it in the global memory, It will search in the <strong>backpack</strong> with the information that has taken with it.  </p>
<h2>Closure behind the scenes</h2>
<p>You could be wondering, how this works under the hood and the answer is that when we declare the increment function inside of outer, that the function automatically creates a hidden property called <strong>[[scope]]</strong> that contains all the surrounding data from where it was declared. </p>
<p>That piece of permanent data is private, we can only access it by running the function. </p>
<p>As a note, we can say that only the data that will be referenced into the returned function will be added to that persisted memory, the other values inside are garbage collected and not accessible anymore. That's the case of the variable anotherCounter in the example below, since it's not used, it's lost.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> anotherCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      counter<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> increment
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span></code></pre></div>
<h2>Multiple Closure instances</h2>
<p>To summarizing, we can say that our high order function returns a function which has attached to it the closure or persistent data available when it was declared.</p>
<p>Every time we invoke that high order function we will return a new function with its own and independent data that can be only modified by invoking that reference to the retuned function.</p>
<p>For that reason in the example below, every call to count is modifying a persisted data completely different that the data which is referencing the anotherCount function since every time we ran outer we created a different execution context with a new brand counter in the variable environment bond to the returned function.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      counter<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> anotherCount <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

  <span class="token function">anotherCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  <span class="token function">anotherCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
 </code></pre></div>
<h2>Closure definition and Scope</h2>
<p>For most developers, this persistent piece of memory is called closure, term that also refers to the whole concept of this implementation. In that way we end up getting a vague concept of what clousure is.</p>
<p>But there are other ways to refer to it. Some people also call to the local memory surrounding our returned function as <strong>Variable Environment</strong> (also lexical environment), and this environment is closed over the function definition that we are returning, so this ends up turning into <strong>COVE, which stands for Closed Over Variable Environment</strong></p>
<p>There is other technical definition that tries to show a depth of understanding of what's going on in this feature. This is PLSRD which stands for <strong>Persistent Lexically Scoped Referenced Data</strong>.</p>
<p>In a programming language, Scope determines what data is available for every single line of code, and Javascript is a <strong>Lexical or Static Scoped language</strong> instead of a Dynamic Scoped language. That means that where a function is declared determines what data is available, and not where the function is run.</p>
<p>This leaves us with at least 3 o 4 names for this data:</p>
<ul>
<li>Closure</li>
<li>COVE</li>
<li>PLSRD</li>
<li>Backpack</li>
</ul>
<h2>Wrapping up</h2>
<p>We have gone through the concept of closures and all its characteristics. This feature gives great power and an endless variety of possibilities to implement different patterns as we said before. You just need to start experimenting with this amazing feature to assimilate even more what you can achieve with it.</p></div><div class="step-buttons"><div class="prev"></div><div class="next"><div><a href="/high-order-functions-callbacks-inversion-control">High order functions, callbacks, and inversion of control</a><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-right" class="svg-inline--fa fa-arrow-right fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg></div></div></div></div></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-141288809-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"closure-high-order-functions-b18","path":"/closure-high-order-functions"};window.dataPath="960/path---closure-high-order-functions-b-18-aaa-sp359ZlkTePHQacveclhLr1wUw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-521b4bc510fc94f4c985.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-13a7ae5500c4500f27f2.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-3de5741b444693cac106.js"],"component---src-templates-work-js":["/component---src-templates-work-js-ec96d106096901e4192d.js"],"component---src-templates-category-js":["/component---src-templates-category-js-596e35422ea3e2ac3dca.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c17601995d1767cef63f.js"],"component---src-pages-work-js":["/component---src-pages-work-js-62611843fc110c6ff91d.js"],"pages-manifest":["/pages-manifest-04187f292117b4ccbd60.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-3de5741b444693cac106.js" async=""></script><script src="/1-39504997749b40bf1bb9.js" async=""></script><script src="/styles-f9e47191f1b1e31091d6.js" async=""></script><script src="/app-521b4bc510fc94f4c985.js" async=""></script><script src="/webpack-runtime-d3ebae42f2bc4ae605a4.js" async=""></script></body></html>